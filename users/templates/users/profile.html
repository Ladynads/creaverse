{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="profile-container">
    <!-- Profile Header -->
    <div class="profile-header">
        <div class="profile-picture">
            {% if profile_user.profile_image %}
                <img src="{{ profile_user.profile_image.url }}" alt="Profile Image" class="profile-img">
            {% else %}
                <img src="{% static 'profile_pics/default_profile.webp' %}" alt="Default Profile Image" class="profile-img">
            {% endif %}
        </div>
        <div class="profile-info">
            <h1 class="username glow-text">{{ profile_user.username }}</h1>
            <p class="bio">{{ profile_user.bio|default_if_none:"No bio yet." }}</p>
            <div class="stats">
                <span class="stat"><strong>Posts:</strong> {{ user_posts|length }}</span>
                <span class="stat"><strong>Followers:</strong> {{ followers_count }}</span>
                <span class="stat"><strong>Following:</strong> {{ following_count }}</span>
            </div>
            
            {% if profile_user != user %}
                {% if is_following %}
                    <a href="{% url 'unfollow_user' username=profile_user.username %}" class="btn btn-unfollow">Unfollow</a>
                {% else %}
                    <a href="{% url 'follow_user' username=profile_user.username %}" class="btn btn-follow">Follow</a>
                {% endif %}
            {% endif %}
        </div>
    </div>

    <!-- Create Post Button -->
    {% if profile_user == user %}
        <div class="create-post">
            <a href="{% url 'feed' %}" class="btn btn-create">‚ûï Create a New Post</a>
        </div>
    {% endif %}

    <!-- User Posts -->
    <div class="posts-section">
        <h2 class="section-title">Your Posts</h2>
        <div class="post-grid">
            {% for post in user_posts %}
                <div class="post-card">
                    <p class="post-date">{{ post.created_at|date:"F j, Y, g:i a" }}</p>
                    <p class="post-content">{{ post.content }}</p>
                    <div class="post-stats">
                        <span class="likes">‚ù§Ô∏è {{ post.likes.count }} Likes</span>
                        <span class="comments">üí¨ {{ post.comments.count }} Comments</span>
                    </div>
                    <a href="{% url 'post_detail' post.id %}" class="btn btn-view">View Post</a>
                    <!-- Like Button -->
                    <button class="like-btn">ü§ç Like</button>
                </div>
            {% empty %}
                <p class="no-posts">No posts yet.</p>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}







